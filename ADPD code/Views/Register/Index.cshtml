@{
    ViewData["Title"] = "Đăng ký";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="~/css/Register.css" />

<div class="register-page">
    <div class="container">
        <div class="header">
            <h1>Đăng ký Tài khoản Sinh viên</h1>
            <p>Hệ thống Quản lý Sinh viên</p>
        </div>

<<<<<<< HEAD
    <form method="post" asp-controller="Register" asp-action="Register">
        @Html.AntiForgeryToken()

        @if (ViewData.ModelState.Any(x => x.Value.Errors.Any()))
=======
        <!-- Hiển thị thông báo lỗi -->
        @if (!ViewData.ModelState.IsValid)
>>>>>>> 54a9c6827043fd99a2ece98a3fa1275f2b5cb6d9
        {
            <div class="alert alert-danger" role="alert">
                @Html.ValidationSummary(false, "", new { @class = "text-danger" })
            </div>
        }

        <!-- Form đăng ký - POST đến RegisterController -->
        <form method="post" asp-controller="Register" asp-action="Register">
            @Html.AntiForgeryToken()

            <div class="form-group">
                <label>Mã sinh viên <span class="required">*</span></label>
                <input type="text"
                       name="studentId"
                       placeholder="VD: SV001234"
                       required
                       pattern="^[A-Za-z0-9]+$"
                       title="Chỉ chấp nhận chữ và số">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Họ và tên đệm <span class="required">*</span></label>
                    <input type="text"
                           name="firstName"
                           placeholder="Nguyễn Văn"
                           required>
                </div>
                <div class="form-group">
                    <label>Tên <span class="required">*</span></label>
                    <input type="text"
                           name="lastName"
                           placeholder="A"
                           required>
                </div>
            </div>

            <div class="form-group">
                <label>Email <span class="required">*</span></label>
                <input type="email"
                       name="email"
                       placeholder="example@student.edu.vn"
                       required>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Ngày sinh <span class="required">*</span></label>
                    <input type="date"
                           name="birthDate"
                           required
                           max="@DateTime.Now.AddYears(-16).ToString("yyyy-MM-dd")">
                </div>
                <div class="form-group">
                    <label>Giới tính <span class="required">*</span></label>
                    <select name="gender" required>
                        <option value="">Chọn giới tính</option>
                        <option value="male">Nam</option>
                        <option value="female">Nữ</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>Số điện thoại <span class="required">*</span></label>
                <input type="tel"
                       name="phone"
                       placeholder="0123456789"
                       required
                       pattern="^[0-9]{10,11}$"
                       title="Số điện thoại phải có 10-11 số">
            </div>

            <div class="form-group">
                <label>Mật khẩu <span class="required">*</span></label>
                <input type="password"
                       name="password"
                       id="password"
                       placeholder="Tối thiểu 6 ký tự"
                       required
                       minlength="6">
                <small>Mật khẩu phải có ít nhất 6 ký tự</small>
            </div>

            <div class="form-group">
                <label>Xác nhận mật khẩu <span class="required">*</span></label>
                <input type="password"
                       name="confirmPassword"
                       id="confirmPassword"
                       placeholder="Nhập lại mật khẩu"
                       required>
            </div>

            <button type="submit" class="btn-submit">Đăng ký</button>

            <div class="login-link">
                Đã có tài khoản? <a href="@Url.Action("Index", "Login")">Đăng nhập ngay</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        // Kiểm tra mật khẩu khớp trước khi submit
        document.querySelector('form').addEventListener('submit', function(e) {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (password !== confirmPassword) {
                e.preventDefault();
                alert('Mật khẩu xác nhận không khớp!');
                return false;
            }
        });
    </script>
}