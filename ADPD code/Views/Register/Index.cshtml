@{
    ViewData["Title"] = "Register";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="~/css/Register.css" />

<div class="register-page">
    <div class="container">
        <div class="header">
            <h1>Student Account Registration</h1>
            <p>Student Management System</p>
        </div>

        <!-- Registration form - POST to RegisterController -->
        <form method="post" asp-controller="Register" asp-action="Register">
            @Html.AntiForgeryToken()

            @if (ViewData.ModelState.Any(x => x.Value.Errors.Any()))
            {
                @* Optionally show field-level errors here *@
            }

            @if (!ViewData.ModelState.IsValid)
            {
                <div class="alert alert-danger" role="alert">
                    @Html.ValidationSummary(false, "", new { @class = "text-danger" })
                </div>
            }

            <div class="form-group">
                <label>Student ID <span class="required">*</span></label>
                <input type="text"
                       name="studentId"
                       placeholder="Ex: SV001234"
                       required
                       pattern="^[A-Za-z0-9]+$"
                       title="Only letters and numbers are allowed">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>First & Middle Name <span class="required">*</span></label>
                    <input type="text"
                           name="firstName"
                           placeholder="Nguyen Van"
                           required>
                </div>
                <div class="form-group">
                    <label>Last Name <span class="required">*</span></label>
                    <input type="text"
                           name="lastName"
                           placeholder="A"
                           required>
                </div>
            </div>

            <div class="form-group">
                <label>Email <span class="required">*</span></label>
                <input type="email"
                       name="email"
                       placeholder="example@student.edu.vn"
                       required>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Date of Birth <span class="required">*</span></label>
                    <input type="date"
                           name="birthDate"
                           required
                           max="@DateTime.Now.AddYears(-16).ToString("yyyy-MM-dd")">
                </div>
                <div class="form-group">
                    <label>Gender <span class="required">*</span></label>
                    <select name="gender" required>
                        <option value="">Select gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>Phone Number <span class="required">*</span></label>
                <input type="tel"
                       name="phone"
                       placeholder="0123456789"
                       required
                       pattern="^[0-9]{10,11}$"
                       title="Phone number must be 10-11 digits">
            </div>

            <div class="form-group">
                <label>Password <span class="required">*</span></label>
                <input type="password"
                       name="password"
                       id="password"
                       placeholder="Minimum 6 characters"
                       required
                       minlength="6">
                <small>Password must be at least 6 characters</small>
            </div>

            <div class="form-group">
                <label>Confirm Password <span class="required">*</span></label>
                <input type="password"
                       name="confirmPassword"
                       id="confirmPassword"
                       placeholder="Re-enter password"
                       required>
            </div>

            <button type="submit" class="btn-submit">Register</button>

            <div class="login-link">
                Already have an account? <a href="@Url.Action("Index", "Login")">Login here</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        // Check password match before submitting
        document.querySelector('form').addEventListener('submit', function(e) {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (password !== confirmPassword) {
                e.preventDefault();
                alert('Password confirmation does not match!');
                return false;
            }
        });
    </script>
}
