<div class="topbar">
    <div class="topbar-left">
        <h1>Dashboard</h1>
        <div class="breadcrumb">
            <span>Trang ch·ªß</span>
            <span>/</span>
            <span>Dashboard</span>
        </div>
    </div>
    <div class="topbar-right">
        <button class="notification-btn">
            üîî
            <span class="notification-badge">3</span>
        </button>
    </div>
</div>

<div class="dashboard-content">
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon blue">üìä</div>
            <div class="stat-info">
                <h3>GPA T√≠ch l≈©y</h3>
                <div class="value">@ViewBag.GPA</div>  
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon green">üìö</div>
            <div class="stat-info">
                <h3>T√≠n ch·ªâ ƒë√£ h·ªçc</h3>
                <div class="value">@ViewBag.TotalCredits/@ViewBag.MaxCredits</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon orange">‚úÖ</div>
            <div class="stat-info">
                <h3>M√¥n h·ªçc k·ª≥ n√†y</h3>
                <div class="value">@ViewBag.CurrentSemesterCourses</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon purple">üìÖ</div>
            <div class="stat-info">
                <h3>L·ªõp h√¥m nay</h3>
                <div class="value">@ViewBag.TodayClasses</div>
            </div>
        </div>
    </div>

    <div class="content-grid">
        <div class="card">
            <div class="card-header">
                <div>
                    <h2 class="card-title">L·ªãch h·ªçc h√¥m nay</h2>
                    <p style="font-size: 13px; color: #666; margin-top: 4px;">
                        @{
                            var displayDate = ViewBag.TodayDate != null ? (DateTime)ViewBag.TodayDate : DateTime.Now;
                            var dayNames = new[] { "Ch·ªß nh·∫≠t", "Th·ª© hai", "Th·ª© ba", "Th·ª© t∆∞", "Th·ª© nƒÉm", "Th·ª© s√°u", "Th·ª© b·∫£y" };
                            var dayName = dayNames[(int)displayDate.DayOfWeek];
                        }
                        @dayName, @displayDate.ToString("dd/MM/yyyy")
                    </p>
                </div>
                <a href="@Url.Action("Schedule", "Student")"
                   class="view-all"
                   data-partial-url="@Url.Action("Schedule", "Student", new { partial = true })">Xem t·∫•t c·∫£ ‚Üí</a>
            </div>
            <table class="schedule-table">
                <thead>
                    <tr>
                        <th>M√¥n h·ªçc</th>
                        <th>Th·ªùi gian</th>
                        <th>Ph√≤ng</th>
                        <th>Gi·∫£ng vi√™n</th>
                    </tr>
                </thead>
                <tbody>
                    @if (ViewBag.TodaySchedule != null && ((IEnumerable<dynamic>)ViewBag.TodaySchedule).Any())
                    {
                        @foreach (var schedule in ViewBag.TodaySchedule)
                        {
                            <tr>
                                <td>
                                    <div class="subject-name">@schedule.CourseName</div>
                                    <div class="subject-code">@schedule.CourseCode</div>
                                </td>
                                <td><span class="time-badge">@schedule.Time</span></td>
                                <td><span class="room-badge">@schedule.Room</span></td>
                                <td>@schedule.LecturerName</td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="4" style="text-align: center; color: #999;">
                                Kh√¥ng c√≥ l·ªãch h·ªçc h√¥m nay
                            </td>
                        </tr>
                    }                             
                </tbody>
            </table>
        </div>

        <div>
            <div class="card" style="margin-bottom: 20px;">
                <div class="card-header">
                    <h2 class="card-title">Th√¥ng b√°o</h2>
                    <a href="#" class="view-all">Xem t·∫•t c·∫£ ‚Üí</a>
                </div>

                @if (ViewBag.RecentAssignments != null && ((IEnumerable<dynamic>)ViewBag.RecentAssignments).Any())
                {
                    @foreach (var assignment in ViewBag.RecentAssignments)
                    {
                        var daysLeft = (int)assignment.DaysLeft;
                        var iconType = daysLeft < 2 ? "warning" : daysLeft < 0 ? "info" : "success";
                        var icon = daysLeft < 0 ? "üì¢" : daysLeft < 2 ? "‚ö†Ô∏è" : "‚úÖ";

                        <div class="notification-item">
                            <div class="notification-icon @iconType">@icon</div>
                            <div class="notification-content">
                                <h4>@assignment.Title</h4>
                                <p>@assignment.CourseName - Deadline: @assignment.Deadline.ToString("dd/MM/yyyy")</p>
                                <span class="notification-time">@(daysLeft >= 0 ? $"C√≤n {daysLeft} ng√†y" : $"Qu√° h·∫°n {-daysLeft} ng√†y")</span>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <div class="notification-item">
                        <div class="notification-icon info">üì¢</div>
                        <div class="notification-content">
                            <h4>Ch∆∞a c√≥ th√¥ng b√°o</h4>
                            <p>Hi·ªán t·∫°i ch∆∞a c√≥ th√¥ng b√°o m·ªõi</p>
                            <span class="notification-time">H√¥m nay</span>
                        </div>
                    </div>
                }

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Thao t√°c nhanh</h2>
                </div>
                <div class="quick-actions">
                <a href="@Url.Action("RegisterStudy", "Student")"
                   class="action-btn"
                   data-partial-url="@Url.Action("RegisterStudy", "Student", new { partial = true })">
                    <div class="icon">‚úèÔ∏è</div>
                    <span>ƒêƒÉng k√Ω m√¥n h·ªçc</span>
                    </a>
                    <a href="@Url.Action("Grades", "Student")"
                       class="action-btn"
                       data-partial-url="@Url.Action("Grades", "Student", new { partial = true })">
                        <div class="icon">üìä</div>
                        <span>Xem ƒëi·ªÉm</span>
                    </a>
                    <a href="@Url.Action("Subject","Student")"
                       class="action-btn"
                       data-partial-url="@Url.Action("Subject","Student",new{ partial = true })">
                       <div class="icon">üìö</div>
                      <span>m√¥n h·ªçc </span>
                       </a>    
                    <a href="@Url.Action("Assignments", "Student")"
                       class="action-btn"
                       data-partial-url="@Url.Action("Assignments", "Student", new { partial = true })">
                        <div class="icon">üìù</div>
                        <span>B√†i t·∫≠p</span>
                    </a>
                    <a href="@Url.Action("Schedule", "Student")"
                       class="action-btn"
                       data-partial-url="@Url.Action("Schedule", "Student", new { partial = true })">
                        <div class="icon">üìÖ</div>
                        <span>L·ªãch thi</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

